# Add Homebrew to path
export PATH=$PATH:/opt/homebrew/bin

# Add Visual Studio Code (code)
export PATH=$PATH:/Applications/Visual\ Studio\ Code.app/Contents/Resources/app/bin

# Add rust tools to path
export PATH=$PATH:$HOME/.cargo/bin

# Go to path
export PATH=$PATH:$HOME/go/bin

# Add mason tools to path
export PATH=$PATH:$HOME/.local/share/nvim/mason/bin

# Setup tmux-sessionizer
export PATH=$PATH:$HOME/.config/tmux/bin
export PROJ_FILE=$HOME/.config/tmux/projects

function ff {
    tmux-sessionizer
}

function addff {
    # check if input is a directory
    if [ -d "$1" ]; then
        # check if the project file exists
        if ! test -f $PROJ_FILE; then
            echo "Creating $PROJ_FILE"
            touch $PROJ_FILE
        fi

        # check if the project is already in the file
        if grep -q "^$1$" $PROJ_FILE; then
            echo "Project already in $PROJ_FILE"
            return
        fi
        echo "Adding $1 to $PROJ_FILE"
        echo "$1" >> "$PROJ_FILE"
    else
        echo "Not a directory: $1"
    fi
}

function rmff {
    # check if input is a directory
    if [ -d "$1" ]; then
        if test -f $PROJ_FILE; then
            # check if the project is already in the file
            if grep -q "^$1$" $PROJ_FILE; then
                # replace all / in input with \/ to escape them
                echo "Removing $1 from $PROJ_FILE"
                sed -i "" -e "/^${1//\//\\/}$/d" $PROJ_FILE
            else
                echo "Project not in $PROJ_FILE"
                return
            fi
        else
            echo "$PROJ_FILE does not exist"
        fi
    else
        echo "Not a directory: $1"
    fi
}

# Set up Node Version Manager (NVM)
function load_nvm {
    export NVM_DIR=~/.nvm
    source $(brew --prefix nvm)/nvm.sh
}

# macro to kill the docker desktop app and the VM (excluding vmnetd -> it's a service)
function kill-docker {
    ps ax|grep -i docker|egrep -iv 'grep|com.docker.vmnetd'|awk '{print $1}'|xargs kill
}

# Better completion
autoload -Uz compinit && compinit
